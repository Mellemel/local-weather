"use strict";!function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};e[s][0].call(u.exports,function(t){var r=e[s][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){function n(t){this.location=t.location,this.currentWeather=t.currentWeather,this.forecast=t.forecast,this.unitChange=new s(this)}function i(t,e){this._model=t,this._elements=e,this.unitButtonClicked=new s(this);var r=this;this._model.unitChange.attach(function(){r.convertUnits()}),this._elements.unitButton.click(function(){r.unitButtonClicked.notify()})}function o(t,e){this._model=t}function s(t){this._sender=t,this._listeners=[]}n.prototype={toCelsius:function(){this.currentWeather.temp=5*(this.currentWeather.temp-32)/9,this.forecast.forEach(function(t){t.high=5*(t.high-32)/9,t.high=5*(t.high-32)/9})},toFahrenheit:function(){this.currentWeather.temp=9*this.currentWeather.temp/5-32,this.forecast.forEach(function(t){t.high=9*t.high/5-32,t.high=9*t.high/5-32})}},i.prototype={show:function(){var t=this._elements.location,e=this._elements.currentWeather,r=this._elements.forecast,n=this._model;t.html(n.location.city+", "+n.location.region),e.html("<h3>"+n.currentWeather.date+"</h3><h1>"+n.currentWeather.temp+"<span>&deg;F</span></h1><h3>"+n.currentWeather.text+"</h3>"),r.html(function(t){return"<td>"+n.forecast[t].day+"</td><td>"+n.forecast[t].date+"</td><td>"+n.forecast[t].high+'<span class="unit">&deg;F</span></td><td>'+n.forecast[t].low+'<span class="unit">&deg;F</span></td><td>'+n.forecast[t].text+"</td>"})},convertUnits:function(){}},s.prototype={attach:function(t){this._listeners.push(t)},notify:function(t){for(var e=0;e<this._listeners.length;e++)this._listeners[e](this._sender,t)}},e.exports={Model:n,View:i,Ctrl:o}},{}],2:[function(t,e,r){var n=t("./weather.js");$(document).ready(function(){var t={url:"https://api.ipify.org",format:"?format=json"};$.get(t.url+t.format,function(t){function e(t){t.currentWeather.date=new Date(t.currentWeather.date),t.currentWeather.temp=parseInt(t.currentWeather.temp),t.forecast.forEach(function(t){t.high=parseInt(t.high),t.low=parseInt(t.low)})}var r={url:"https://freegeoip.net/",format:"json/",ip:t.ip};$.getJSON(r.url+r.format+r.ip,function(t){var r=t.city,i=t.region_code;/the/gi.test(r)&&(r=r.split(" ")[1]);var o={url:"http://query.yahooapis.com/v1/public/yql?q=",query:encodeURI('select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+r+", "+i+'")'),setting:"&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys"};$.getJSON(o.url+o.query+o.setting).then(function(t){var r={location:t.query.results.channel.location,currentWeather:t.query.results.channel.item.condition,forecast:t.query.results.channel.item.forecast};e(r);var i=new n.Model(r),o=new n.View(i,{location:$("#location"),unitButton:$("#button"),currentWeather:$("#today"),forecast:$(".day")});new n.Ctrl(i,o);o.show()})})})})},{"./weather.js":1}]},{},[2]);
//# sourceMappingURL=app.js.map
